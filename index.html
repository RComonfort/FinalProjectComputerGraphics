<!--Rafael Antonio Comonfort Viveros A01324276-->

<html> 
    <head> 
        <title> Final Project - Nov 27, 2018</title> 
        <style> 
            canvas { width: 100%; height: 100% }
        </style> 
    </head> 
    <body> 
		<script src="three.min.js"> </script>
		<script src="Three.CSG.js"></script>
		<script src="Aula.js"></script>
        <script> 
            
			var scene = new THREE.Scene(); 
			setupLighting(scene);

            var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
			camera.position.x = 0.0; camera.position.z = 5.0 
			
            var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight); 	
			document.body.appendChild(renderer.domElement); 
			renderer.setClearColor(0x2a313d, 1); // set the background color
			
            var moveSpeed = 1.5;
			var camRotSpeed = 0.1;
			var gearRotSpeed = 0.005
			window.addEventListener('keydown',doKeyDown,true);
			
			//Setup scene objects
			var aula = new Aula();
			aula.object3D.position.z -= 10;

			scene.add(aula.object3D);
			
			//Tick function
			var render = function () { 
				requestAnimationFrame(render); 
				renderer.render(scene, camera); 
			}; 
			render();

            function setupLighting(scene) {
				
				var front = new THREE.DirectionalLight( 0xffffff, 1 );
				front.position.set(-130, 140, 1500);
				front.position.multiplyScalar( 1.1 );
				front.rotation.x += THREE.Math.degToRad(10);
				front.rotation.y -= THREE.Math.degToRad(25);
				scene.add(front);

				var right = new THREE.DirectionalLight( 0xffffff, .8 );
				right.position.set(10000, 0, 0);
				right.rotation.y += THREE.Math.degToRad(90);
				scene.add(right);

				var back = new THREE.DirectionalLight( 0xffffff, .75  );
				back.position.set( 130, -140, -1500); 
				scene.add(back);
				back.rotation.x -= THREE.Math.degToRad(30);
				back.rotation.y -= THREE.Math.degToRad(20);
			}
			
			function doKeyDown(evt){
				let direction = camera.rotation.y;
                switch (evt.keyCode) {
                    case 38:  /* Up arrow was pressed */                        
                        camera.position.x -= Math.sin (direction) * moveSpeed;
                        camera.position.z -= Math.cos (direction) * moveSpeed;
                        break;
                    case 40:  /* Down arrow was pressed */ 
                        camera.position.x += Math.sin (direction) * moveSpeed;
                        camera.position.z += Math.cos (direction) * moveSpeed;                       
                        break;
                    case 37:  /* Left arrow was pressed */  
                        camera.rotation.y += camRotSpeed;
                        break;
                    case 39:  /* Right arrow was pressed */ 
                        camera.rotation.y -= camRotSpeed;                         
						break;
					case 87:  /* W was pressed */
                        camera.position.y += 0.5;                        
                    	break;
                    case 83:  /* S was pressed */
                        camera.position.y -= 0.5;                        
                    	break;
                    case 65:  /* A was pressed */                        
                        camera.position.z -= moveSpeed * Math.cos(direction+(Math.PI/2.0));
                        camera.position.x -= moveSpeed * Math.sin(direction+(Math.PI/2.0));
                    	break;
                    case 68:  /* D was pressed */ 
                        camera.position.z -= moveSpeed * Math.cos(direction-(Math.PI/2.0));
                        camera.position.x -= moveSpeed * Math.sin(direction-(Math.PI/2.0));                   
						break;
                }
            }            
            
        </script>
    </body> 
</html>